# ‏udev

## محتوای درس

در گذشته و در واقع حتی امروز‌، اگر واقعا نیاز به ساخت یک device node جدید داشتید‌،
از دستوری مثل دستور زیر استفاده می‌کردید:

```
$ mknod /dev/sdb1 b 8 3
```

این دستور یک device node جدید از نوع بلاک (b) با شناسه اصلی 8 و شناسه فرعی 3 در
آدرس ‎/dev/sdb1 ایجاد می‌کند.

برای پاک کردن یک دستگاه نیز کافی بود با استفاده از دستور `rm` فایل مربوط به
دستگاه را از دایرکتوری ‎/dev پاک کنید.

خوشبختانه‌، ما دیگر ملزم به استفاده از این روش نیستیم. سیستم udev‌، به طور خودکار
فرآیند ساخت و حذف فایل‌های دستگاه را بر اساس متصل بودن یا نبودنشان برای ما انجام
می‌دهد. یک دیمون (daemon) به اسم udevd در حال اجرا روی سیستم است که به پیغام‌های
کرنل در خصوص دستگاه‌های نصب شده گوش می‌کند. udevd این پیغام‌ها را پردازش نموده و
آن‌ها را با قوانین تعریف شده در ‎/etc/udev/rules.d مطابقت می‌دهد. بر اساس همین
قوانین نیز udev فایل‌ها و پیوند‌های نمادین (symbolic link) مورد نیاز دستگاه را
می‌سازد. شما نیز می‌توانید قوانین udev مورد نیاز خودتان را بنویسید که البته کمی
خارج از محدودهٔ مورد بحث این درس است. همچنین سیستم شما تعداد زیادی از این قوانین
را به صورت از پیش تعریف شده همراه دارد که احتمالا شما را از نوشتن یک نمونهٔ جدید
بی‌نیاز می‌سازد.

از سوی دیگر‌، شما می‌توانید دیتابیس udev و sysfs را با استفاده از دستور `udevadm`
بررسی کنید. این دستور خیلی کاربردی است‌، ولی گاهی می‌تواند سردرگم کننده باشد. یک
دستور ساده برای دیدن اطلاعات دستگاهی‌، می‌تواند به صورت زیر باشد:

```
$ udevadm info --query=all --name=/dev/sda
```

## تمرین

نمونه دستور `udevadm` داده شده را اجرا و خروجی آن را بررسی کنید.

## سوال آزمون

چه ابزاری به صورت خودکار فایل‌های دستگاه‌های مورد نیاز را اضافه یا حذف می‌کند؟

## پاسخ آزمون

udev
