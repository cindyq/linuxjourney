# بررسی Upstart

## محتوای درس

‏Upstart محصول Canonical است‌، و از همین رو برای مدتی به عنوان پیاده‌سازی init مورد استفادهٔ
Ubuntu بود. با این حال‌، نسخه‌های جدید‌تر Ubuntu از Systemd استفاده می‌کنند. Upstart
در جهت حل مشکلات عمدهٔ Sys V از جمله روند شروع سخت‌گیرانه‌، بلاک شدن وظایف و… به
وجود آمد. مدل پیاده‌سازی رویداد‌ها و وظایف Upstart او را قادر می‌سازد که به وقایع
به محض رخدادشان پاسخ دهد.

اگر دایرکتوری ‎/usr/share/upstart را در سیستم خود دارید به احتمال زیاد از
پیاده‌سازی Upstart بهره می‌گیرید.

وظایف (Jobs) کار‌هایی هستند که Upstart انجام می‌دهد و رویداد‌ها (events) پیغام‌هایی
که از پروسه‌های دیگر در جهت راه‌اندازی وظایف دریافت می‌شود. برای دیدن لیستی از
وظایف و تنظیمات‌شان می‌توانید از دستور زیر استفاده کنید:

```
pete@icebox:~$ ls /etc/init
acpid.conf                   mountnfs.sh.conf
alsa-restore.conf            mtab.sh.conf
alsa-state.conf              networking.conf
alsa-store.conf              network-interface.conf
anacron.conf                 network-interface-container.conf
```

هر کدام از این تنظیمات شامل اطلاعاتی در خصوص نحوهٔ راه‌اندازی وظایف و زمان راه‌اندازی‌شان می‌شوند.
برای مثال ممکن است در networking.conf مقادیر زیر را مشاهده کنید:

```
start on runlevel [235]
stop on runlevel [0]
```

که نشان دهندهٔ این است که networking باید روی runlevel‌های ۲، ۳ و یا ۵ اجرا و در
runlevel صفر متوقف شود. راه‌های مختلفی برای نوشتن یک فایل تنظیمات وجود دارد که
شما می‌توانید با بررسی فایل‌های مربوط به سرویس‌های مختلف آن‌ها را مشاهده کنید.

روش کار Upstart به صورت زیر است:

- اول تنظیمات وظایف را از ‎/etc/init بارگذاری می‌کند.
- وقتی که رویداد شروع (startup) اتفاق افتاد‌، وظایفی مربوط به آن فراخوانی می‌شوند.
- این وظایف رویداد‌های دیگری را ایجاد می‌کنند که منجر به فراخوانی وظایف دیگر می‌شود.
- Upstart این کار را تا زمانی که تمام وظایفِ مورد نیاز فراخوانی شده باشند انجام می‌دهد.

## تمرین

اگر از Upstart استفاده می‌کنید‌، ببینید که آیا می‌توانید تنظیمات موجود در ‎/etc/init را درک کنید یا نه.

## سوال آزمون

کدام پیاده‌سازی init در نسخه‌های قدیمی اوبونتو مورد استفاده قرار می‌گرفت؟

## پاسخ آزمون

upstart
