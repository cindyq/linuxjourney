# نگاهی به Systemd

## محتوای درس

‏Systemd کم‌کم دارد به سیستم استاندارد پیاده‌سازی init روی لینوکس‌ها تبدیل می‌شود.
اگر روی سیستم‌تان دایرکتوری‌ای به اسم ‎/usr/lib/systemd دارید‌، به احتمال زیاد از
این init بهره می‌برید.

‏Systemd از اهداف برای بالا آوردن سیستم بهره می‌برد. اساسا شما هدفی برای انجام
دارید و آن هدف‌، پیش‌نیاز‌هایی برای مرتفع شدن دارد. Systemd بسیار انعطاف‌پذیر است، و
از یک روند ثابت برای شروع پروسه‌ها استفاده نمی‌کند. در ادامه روندی که در واقع رخ
می‌دهد را بررسی می‌کنیم:

- اول Systemd فایل‌های تنظیماتش را بارگذاری می‌کنید. این فایل‌ها معمولا در
  ‎/usr/lib/systemd/system و یا ‎/etc/systemd/system قرار دارند.
- سپس اهداف بارگذاری سیستم را مشخص می‌کند که معمولا default.target است.
- در آخر systemd مشخص می‌کند که برای بارگذاری سیستم چه پیش‌نیاز‌هایی لازم است و
  آن‌ها را فعال می‌کند.

همچون runlevel‌های Sys V، در واقع systemd نیز‌، در اهداف متفاوتی بارگذاری می‌شود:

- ‏poweroff.target: سیستم را خاموش می‌کند.
- rescue.target:‌ حالت یک کاربره.
- multi-user.target: حالت چند کاربره.
- graphical.target: حالت چند کاربره به همراه شبکه و رابط گرافیکی.
- reboot.target: راه‌اندازی مجدد سیستم.

معمولا حالت پیش‌فرض هدف default.target به graphical.target اشاره می‌کند.

عنصر اصلی‌ای که systemd با آن کار می‌کند unit نام دارد. Systemd تنها سرویس‌ها را
خاموش و روشن نمی‌کند. بلکه می‌تواند فایل‌سیستم‌ها را سوار کند، سوکت‌های شبکه را زیر
نظر بگیرد‌، و چون بسیار قدرتمند است‌، unit‌های متفاوتی دارد که می‌تواند بر اساس آن‌ها
عمل کند. unit‌های مطرح اصلی به شرح زیر‌ند:

- ‏unit سرویس‌ها: به ما اجازهٔ شروع و متوقف کردن سرویس‌ها را می‌دهند و در فایل‌هایی با
  پسوند ‎.service ذخیره می‌شوند.
- unit‌های سوار کردن:‌ وظیفهٔ سوار کردن فایل‌سیستم را دارند و در فایل‌هایی با پسوند
  ‎.mount ذخیره می‌شوند.
- unit‌های هدف:‌ که یونیت‌های دیگر را با یک‌دیگر تلفیق می‌کنند و در فایل‌هایی با پسوند
  ‎.target ذخیره می‌شوند.

برای مثال‌، فرض کنید default.target بارگذاری شده است. این هدف‌، سرویس‌های
netwoking.service و crond.service را تلفیق می‌کند. پس وقتی ما یک unit را فعال
می‌کنیم، هر چیزی که آن unit به آن وابسته است نیز فعال خواهد شد.

## تمرینات

این درس تمرینی ندارد.

## سوالات آزمون

از کدام نوع unit برای تلفیق دیگر unit‌ها استفاده می‌شود؟

## پاسخ آزمون

target
