# Путь пакета

## Содержание урока

<b>Давайте рассмотрим, как пакет перемещается внутри локальной сети</b>

<ol>
<li>Сначала локальная машина сравнивает IP-адрес назначения, чтобы узнать, находится ли он в той же подсети, глядя на свою маску подсети.</li>
<li>При отправке пакетов им необходимо иметь MAC-адрес источника, MAC-адрес назначения, IP-адрес источника и IP-адрес назначения, и в этом случае мы не знаем MAC-адрес назначения.</li>
<li>Чтобы добраться до хоста назначения, мы используем ARP для трансляции запроса в локальной сети, чтобы найти MAC-адрес хоста назначения.</li>
<li>Теперь пакет может быть успешно отправлен! </li>
</ol>

<b>Посмотрим, как пакет перемещается за пределы своей сети</b>

<ol>
<li>Сначала локальная машина сравнивает IP-адрес назначения, поскольку он находится за пределами нашей сети, он не видит MAC-адрес хоста назначения. И мы не можем использовать ARP, потому что ARP-запрос является широковещательной рассылкой на локально подключенные хосты.</li>
<li>Таким образом, наш пакет теперь смотрит на таблицу маршрутизации, он не знает адрес IP назначения, поэтому он отправляет его на шлюз по умолчанию (другой маршрутизатор). Итак, теперь наш пакет содержит наш исходный IP-адрес, IP-адрес назначения и исходный MAC-адрес, однако у нас нет MAC-адреса назначения. Помните, что MAC-адреса достигаются только через одну и ту же сеть. Так что он делает? Он отправляет ARP-запрос, чтобы получить MAC-адрес шлюза по умолчанию.</li>
<li>Маршрутизатор смотрит на пакет и подтверждает MAC-адрес назначения, но это не конечный IP-адрес назначения, поэтому он продолжает просматривать таблицу маршрутизации, чтобы пересылать пакет на другой IP-адрес, который может помочь пакету перейти к месту назначения. Каждый раз, когда пакет перемещается, он удаляет старый MAC-адрес источника и назначения и обновляет пакет новыми MAC-адресами источника и назначения.</li>
<li>Как только пакет будет перенаправлен в ту же сеть, мы используем ARP для поиска конечного MAC-адреса назначения.</li>
<li>Во время этого процесса наш пакет не меняет исходный или целевой IP-адрес.</li>
</ol>

## Задание

Нет задания для этого урока.

## Вопрос

Как найти MAC-адрес IP-адреса?

## Ответ

ARP
